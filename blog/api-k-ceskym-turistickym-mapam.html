<!DOCTYPE html>
<html lang="cs">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <title>API k českým turistickým mapám - Javorové lístky</title>

            <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css">
            <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,700|Slabo+13px:400,700&amp;subset=latin,latin-ext">

        <link rel="stylesheet" href="http://honzajavorek.cz/theme/css/code.css">
        <link rel="stylesheet" href="http://honzajavorek.cz/theme/css/main.css">
            <link rel="stylesheet" href="http://honzajavorek.cz/theme/css/site.css">

                <link rel="alternate" type="application/rss+xml" title="Javorové lístky - všechny články" href="http://honzajavorek.cz/feed.xml">
                <link rel="alternate" type="application/rss+xml" title="Javorové lístky - všechny komentáře" href="http://javorove-listky.disqus.com/latest.rss">

        <link rel="alternate" type="application/rss+xml" title="Javorové lístky – komentáře ke článku API k českým turistickým mapám" href="http://javorove-listky.disqus.com/api_k_ceskym_turistickym_mapam/latest.rss">

        <link rel="shortcut icon" type="image/x-icon" href="http://honzajavorek.cz/favicon.ico">

        <meta name="twitter:card" content="summary_large_image">
        <meta name="og:description" content="API k českým turistickým mapám - Javorové lístky">
        <meta name="og:image" content="http://honzajavorek.cz/images/125.jpg">
    </head>
    <body>
        <div class="container article">
<div class="site-navigation">
    <a href="http://honzajavorek.cz/blog/" class="btn btn-primary">
        <i class="fa fa-home"></i> Javorové lístky
    </a>
</div>

<div class="article-container">
    <div class="header">
        <h1>API&nbsp;k českým turistickým mapám</h1>
        <p class="supressed">
            <time datetime="2010-01-22T00:00:00+01:00" pubdate>22.1.2010</time>
            <br>
            <a href="#about">Honza Javorek</a>
        </p>
    </div>

    <div class="content">
        <div><p><em>Článek vyšel na serveru <a href="http://zdrojak.root.cz/clanky/api-k-ceskym-turistickym-mapam/">Zdrojak.cz</a>. Volně vychází z <a href="http://honzajavorek.cz/blog/bakalar">mé bakalářské práce</a>.</em></p>
<p>Zdá se, že český trh s mapovými službami je poměrně stabilizovaný a nic převratného se, kromě zavádění Google Street View, neděje. Pojďme se tedy společně podívat, co nám, webovým vývojářům, současný stav nabízí a jaké máme vlastně možnosti, chceme-li psát aplikace pro Českou republiku využívající turistické mapové podklady.</p>
<h2>Trocha historie neuškodí</h2>
<p>V oblasti mapových technologií na internetu proběhl před několika lety opravdový zlom. Vše začalo 8. 2. 2005, kdy Google <a href="http://googleblog.blogspot.com/2005/02/mapping-your-way.html">spustil</a> své revolučně zpracované interaktivní Google Maps. V řetězové reakci si postupně i další provozovatelé online map začali uvědomovat skrytý potenciál této služby (prodej regionální reklamy, cílená reklama, partnerství s jízdními řády apod.) a začali také investovat velké částky do její modernizace. Na českém internetu vznikly časem dva velké a velmi kvalitní mapové servery, což je ve světě celkem ojedinělý úkaz, přihlédneme-li k velikosti a významu naší země.</p>
<p>Ještě v roce jejich vydání představil Google (jako první) u svých map aplikační rozhraní pro použití mapových podkladů i na jiných webech. Vydání API se setkalo s <a href="http://maps.google.com/help/maps/casestudies/">obrovským ohlasem</a> a nadobro změnilo podobu webu. Po celém internetu se začaly objevovat interaktivní mapy – od jednoduchých orientačních výřezů po aplikace na mapách kompletně založené. Konkurence odpověděla svými vlastními API.</p>
<p>Ačkoliv od vydání prvních mapových API uplynulo pět let, tedy <em>půlstoletí digitálního světa</em>, o aktuálním stavu služeb se moc nehovoří. Popišme si tedy specifika, výhody a nevýhody jednotlivých mapových API tak, jak je známe dnes. Je nutné podotknout, že samotných mapových serverů je mnohem více (např. Mapy iDNES.cz, Yahoo Maps, Ask.com Maps &amp; Directions, Multimap, NAVTEQ Map24, Bing Maps, aj.), ale nepovažoval jsem jejich přínos za dostatečně relevantní pro tento článek, jelikož poskytované datové podklady nejsou dostatečné pro Českou republiku a API vůbec nenabízejí, nebo má velmi omezené možnosti.</p>
<h2>Proč zrovna turistické mapy?</h2>
<p>Přiznejme si, že pokud chceme postavit aplikaci využívající mapy, nejspíše bezmyšlenkovitě sáhneme po Google Maps. Mají nejpropracovanější API s nejjistější budoucností, a Google je už v České republice dostatečně aktivní na to, aby k němu i český vývojář měl trochu důvěry. Aktuálnost mapových podkladů je napříč spektrem poskytovatelů srovnatelná, a ty od Google jsou prostě dobré a pro většinu aplikací dostačující. Už ani v oblasti integrace map s místními službami nemají zdejší poskytovatelé moc výrazný náskok. Na mapách od celosvětového giganta totiž dnes najdeme i tu poslední tramvajovou zastávku nebo hospodu za rohem, tedy věci, jež jsme ještě před pár lety mohli najít jen na službách vyvíjených v ČR.</p>
<p>Chceme-li však programovat aplikaci zaměřenou na turistiku, cyklistiku nebo jakýkoliv jiný sport a naším záměrem tedy bude mít kvalitní turistické mapy, staneme na rozcestí. Brzy totiž zjistíme, že nabídka Google Maps je v tomto směru poměrně tristní a domácí hráči, kteří by z takové mezery mohli těžit, sice něco mají, ale to něco není vůbec takové, jaké bychom si to představovali. Vzhledem k možnému komerčnímu využití cílové skupiny uživatelů to je velká škoda – Češi jsou národ sportovců a turistů a alternativy k zahraničním projektům jako např. <a href="http://www.mapmyrun.com/">MapMyRun.com</a> zde prostě chybí.</p>
<h2>Google Maps</h2>
<p>Začněme průkopníkem v oblasti online map. Mapový server i API samozřejmě nabízí již hodně dlouho, takže jeho služby jsou v mnoha směrech nejvyzrálejší. API je neustále vyvíjeno a pracuje se na
jeho <a href="http://code.google.com/intl/cs/apis/maps/documentation/v3/">třetí verzi</a>.</p>
<figure class="figure"><img alt="obrázek" src="http://honzajavorek.cz/images/125.jpg" class="figure-img img-fluid img-rounded"></figure>
<p>Není dobré se však nechat unést jeho možnostmi. Je nutné zaměřit se i na jiné rysy, důležité pro náš záměr. Mezi takové patří například skutečnost, že do češtiny začala být služba lokalizována až <a href="http://www.lupa.cz/clanky/mapy-google-v-cestine-realita-nebo-zbozne-prani/">nedávno</a>. Dnes je již sice míra integrace map do českého prostředí na velmi dobré úrovni, ale z hlediska mapových podkladů má jednu velkou, již zmíněnou mezeru – turistická data. Google poskytuje mapy globálně a proto se mu v nich velmi špatně odráží specifika jednotlivých zemí. K dispozici jsou sice terénní mapy s vrstevnicemi, ale neexistuje možnost zobrazit na nich české turistické trasy a cyklostezky.</p>
<p>Jinak jsou podklady kvalitní, i když někdy méně přesné, než u lokálních mapových služeb. Google používá kombinaci několika zdrojů geografických map, přičemž většinu českých podkladů získává od dodavatele GEODIS Brno. Předností map je samozřejmě dostupnost podkladů pro celý svět a lákavá je rovněž představa možného budoucího napojení aplikace např. v podobě vrstvy na program Google Earth.</p>
<h2>Mapy.cz</h2>
<p>Mapy.cz byly prvním ryze českým projektem v oblasti nových online map a dodnes jsou lídrem lokálního trhu. Stejně jako za Google Maps stojí i za těmito mapami silná společnost. Budoucnost serveru a případný další vývoj API je celkem jistý. Seznam.cz se na rozdíl od všech ostatních českých portálů profiloval po vzoru Google spíše do společnosti, jež svou budoucnost spojuje s technologickým pokrokem, než do mediálního vydavatelství jako například Centrum Holdings. Odhadnutelné záměry potvrdili nedávným uveřejněním zprávy o <a href="http://mapy.cz.sblog.cz/2009/02/18/29">vývoji nového API</a>.</p>
<p>Současný stav API je ale celkem nešťastný. Aplikační rozhraní nabízí jen omezenou škálu funkcí, omezené mapové podklady oproti službě Mapy.cz a samotná práce s funkcemi API působí na vývojáře poněkud těžkopádně. Jeho licenční podmínky navíc nejsou tak volné jako u ostatních API a požadují registraci klíče nikoliv na doménu, ale přímo na unikátní URI, kde se má mapa nacházet. To jej pro tvorbu složitější aplikace prakticky vyřazuje ze hry. V podmínkách je také omezení na 1000 zobrazení denně a zákaz provozu map pro komerční užití, což v rané fázi projektu není velkou překážkou, ale pro budoucí rozvoj projektů ano.</p>
<figure class="figure"><img alt="obrázek" src="http://honzajavorek.cz/images/126.jpg" class="figure-img img-fluid img-rounded"></figure>
<p>Nové API čtvrté verze vyvíjí v Seznam.cz Ondřej Žára, autor povedeného nástroje pro tvorbu databázových schémat, <a href="http://code.google.com/p/wwwsqldesigner">WWW SQL Designer</a>. Bohužel rozhraní je zatím stále dost nestabilní a podle autorových
slov v <a href="http://forum.lide.cz/forum.fcgi?akce=forum_data&amp;forum_ID=86016&amp;auth=">diskusi</a> ani jemu stále ještě nejsou známy nové licenční podmínky. Ve výše zmíněné diskusi postupně přibývají oznámení o nových funkcích, takže se možná nového API jednou opravdu dočkáme. Kdy to však bude a za jakých podmínek bude k dispozici, to zatím nikdo neví.</p>
<p>Mapy.cz jsou připraveny kombinací geografických dat od PLANstudio a GEODIS Brno. Turistická mapa je nejkvalitnější podobnou mapou na českém internetu – za její asi nejpodstatnější nevýhodu by se dala chápat absence velkého měřítka (turistickou mapu lze, na rozdíl od té na Amapy.cz, přiblížit jen do poměrně omezených podrobností). Seznam.cz ji poskytuje na základě dat společnosti SHOCart, která je známa svými papírovými turistickými a cyklistickými publikacemi. Je škoda, že nepoužitelné API v tomto případě brání využít tak kvalitní podklady.</p>
<h2>Amapy.cz</h2>
<p>Amapy.cz se na svět dostaly v roce 2006 pod hlavičkou portálu Atlas.cz. Ihned po <a href="http://management.blog.lupa.cz/2006/11/05/spetka-koreni-ze-zakulisi-projektu-novych-atlasich-map/">představení</a> bylo jasné, že se s nimi musí na českém trhu počítat – zpracování bylo profesionální a spolu s mapami přišlo i první, na funkce bohaté, dobře dokumentované české mapové API. Vývoj však postupně ustával a po tom, co byl Atlas.cz sjednocen s Centrum.cz pod hlavičku Centrum Holdings, nelze již kolem API pozorovat vůbec žádnou činnost ze strany provozovatele. Celou službu původně zpracoval Daniel Steigerwald, který mé doměnky <a href="http://twitter.com/steida/statuses/2211073537">de facto potvrdil</a>.</p>
<figure class="figure"><img alt="obrázek" src="http://honzajavorek.cz/images/124.jpg" class="figure-img img-fluid img-rounded"></figure>
<p>API je však opravdu velmi dobře použitelné a mapové podklady kvalitní, připravené ve spolupráci s firmou DPA. I přes API lze dokonce zobrazovat vrstvy s turistickými a cyklistickými značkami a už i zcela základní mapa disponuje vrstevnicemi. Aplikační rozhraní nabízí funkce, jež nelze najít ani u Google Maps API a podporuje několik souřadnicových systémů naráz, což je výhodné při spolupráci s jinými službami (každá požaduje body v jiném formátu).</p>
<p>Specifikem API je integrovaný JavaScriptový framework MooTools 1.11. Výhodou je, že po vložení API do stránky lze přímo využít všech výhod frameworku a není nutné nějaký připojovat dodatečně. Nevýhodou je nemožnost vlastního výběru frameworku a také ustrnutí vývoje API, protože v důsledku toho nebyl průběžně framework obnovován a zůstal v API ve verzi 1.11, ačkoliv nedávno byly MooTools vydány již ve velmi odlišné verzi 1.2.4. Jiným zářným příkladem zastarání budiž kompatibilita s Internet Explorerem 8. O tom nemá původní kód API nejmenší tušení, takže se jeho funkčnost musí řešit přes <a href="http://zdrojak.root.cz/clanky/tri-zobrazovaci-mody-internet-exploreru-8/">meta tag s <em>X-UA-Compatible</em></a>.</p>
<h2>Otevřený projekt OpenStreetMap</h2>
<p>OpenStreetMap je otevřený projekt, který se snaží vytvořit volně dostupná geografická data. Získává je integrací dat z různých zdrojů a především individuálním sběrem dat pomocí GPS zařízení. Mnoho institucí, organizací a dokonce i firem uvolnilo svá data pod licencí kompatibilní s OpenStreetMap, aby tomuto projektu pomohli.</p>
<p>Kvalita mapových podkladů pro ČR však není zrovna nejlepší a pro účely aplikace, která to se svým záměrem myslí vážně, se moc nehodí ani forma jejich zobrazení. Mapy sice obsahují například polohu sloupů elektrického vedení nebo přesné hranice lesů, jenže vrstevnice nebo turistické značky a cyklostezky nepodporují.</p>
<p>OpenStreetMap je zajímavý počin a do budoucna možná perspektivní, ale jeho nasazení v aplikaci se nedá příliš doporučit. Je uveden pro úplnost jako zajímavý alternativní a otevřený zdroj geografických dat, jenž by v budoucnosti mohl nabýt na relevanci.</p>
<h2>Vyhlídky</h2>
<p>Jak je naznačeno v úvodních odstavcích, v oblasti turistických map je to takové nešťastné. Google Maps nám nabízí možnosti, o jakých jsme ani nesnili, ale v podkladech najdeme jen zeleně podbarvené vrstevnice. Seznam.cz sice vyvíjí perspektivní API, ale kdy bude vydáno a za jakých podmínek, to nevíme. To současné je pro reálný projekt v podstatě nepoužitelné. Amapy.cz by svými funkcemi a dobrými podklady měly situaci zachraňovat, ale když se na API podíváme blíž, zjistíme, že z jeho dokumentace musíme sfouknout prach a mezi zdánlivě nablýskanými ovládacími prvky mapy musíme vymést pavučiny.</p>
<p>Současné aplikace většinou používají Google Maps a spoléhají se, že uživatelům bude stačit ortofotomapa. Území Česka a Slovenska má ale <a href="http://www.klubturistu.cz/turisticke-znaceni">jednu z nejdokonalejších a nejhustších sítí turistického značení</a> a tyto trasy jsou bez diskuse něčím, co nesmí na takto cílených mapách chybět. Podobné značení má také Polsko, ale jinak je takováto síť světově unikátní. Pokud chceme poskytovat možnost zobrazení těchto tras, musíme tedy využít lokálního poskytovatele. Jejich současná řešení však na seriózně míněný projekt použít nelze.</p>
<p>Světlo na konci tunelu můžeme spatřovat v API od Seznam.cz. Nepovažuji za pravděpodobné, že by Google začal podporovat české turistické značení a nemyslím si, že Centrum Holdings bude investovat do nového mapového API. Dokud nebudou dostupné plnohodnotné české turistické mapy, budou provozovatelé projektů v bezvýchodné situaci a uživatelé svázáni možnostmi současných Google Maps. Nevzniknou žádné české startupy a cílová skupina se nepřestane přesouvat k celosvětovým službám, které sice nemají ani to turistické značení, ani nehovoří česky, ale nabízí stejné mapy (Google) a navrch existující komunitu, prověřené zázemí a propracované funkce. Ujede nám zase vlak?</p>
<p><em><a href="http://zdrojak.root.cz/clanky/api-k-ceskym-turistickym-mapam/nazory/">Diskuse k článku</a> se nachází na serveru Zdrojak.cz.</em></p></div>
    </div>

        <hr>

        <div id="about" class="about">
            <h2 class="supressed">
                    Honza Javorek
            </h2>
            <div class="about-box">
                    <img src="http://honzajavorek.cz/images/honza.jpg" class="about-image img-rounded">
                <div class="about-text">
                    <p><a href="http://honzajavorek.cz">Honza</a> je programátor. Od roku 2011 buduje českou
komunitu kolem jazyka <a href="http://python.cz/">Python</a>. V současnosti pomáhá hlavně s
propagací aktivit, jako jsou <a href="http://pyladies.cz/">PyLadies</a>,
<a href="http://pyvo.cz/">Pyvo</a>, nebo <a href="https://cz.pycon.org/">PyCon CZ</a>. Přes den jej
najdete v <a href="https://apiary.io/">Apiary</a>, kde se stará o
<a href="https://github.com/apiaryio/dredd">Dredd</a>, framework na testování API. Občas
taky radí lidem jak mají API dělat a přednáší o tom na konferencích.</p>
                </div>
            </div>
        </div>

    <hr>

    <div id="share" class="share">
        <a href="//www.facebook.com/sharer.php?u=http%3A//honzajavorek.cz/blog/api-k-ceskym-turistickym-mapam&amp;t=Javorov%C3%A9%20l%C3%ADstky%3A%20API%20k%20%C4%8Desk%C3%BDm%20turistick%C3%BDm%20map%C3%A1m" target="_blank" class="btn btn-primary-outline">
            <i class="fa fa-facebook-square"></i> Facebook
        </a>
        <a href="//twitter.com/share?url=http%3A//honzajavorek.cz/blog/api-k-ceskym-turistickym-mapam&amp;text=Javorov%C3%A9%20l%C3%ADstky%3A%20API%20k%20%C4%8Desk%C3%BDm%20turistick%C3%BDm%20map%C3%A1m" target="_blank" class="btn btn-info-outline">
            <i class="fa fa-twitter-square"></i> Twitter
        </a>
    </div>

        <hr>

        <div class="article-comments" id="comments">
            <div id="disqus_thread"></div>
            <script>
                var disqus_sitename = "javorove-listky";
                var disqus_config = function () {
                    this.page.identifier = "\/home\/travis\/build\/honzajavorek\/honzajavorek.cz\/content\/2010-01-22_api-k-ceskym-turistickym-mapam.md";
                    this.page.title = "API k \u010desk\u00fdm turistick\u00fdm map\u00e1m";
                };
                (function() {
                    var d = document, s = d.createElement('script');
                    s.src = '//' + disqus_sitename + '.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                })();
            </script>
            <noscript>
                <p class="noscript">Bez JavaScriptu se komentáře nezobrazí.</p>
            </noscript>
        </div>
</div>

    <hr>

    <div id="feeds" class="feeds">
        <a href="http://javorove-listky.disqus.com/api_k_ceskym_turistickym_mapam/latest.rss" class="btn btn-primary-outline">
            <i class="fa fa-feed"></i> Komentáře
        </a>
    </div>
        </div>

        <hr>

        <div class="footer">
            <p>© 2007—2016 <a href="http://honzajavorek.cz">Honza Javorek</a></p>
        </div>

        <script async src="//platform.twitter.com/widgets.js"></script>
            <script>
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', "UA-1316071-6"]);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
    </body>
</html>